@use '@/app/styles/tokens/primitives' as p;

.ui-button {
  --btn-theme-base: var(--accent-primary);
  --btn-theme-hover: var(--accent-hover);
  --btn-theme-text-on-solid: var(--text-on-brand);

  --btn-bg: var(--btn-theme-base);
  --btn-color: var(--btn-theme-text-on-solid);
  --btn-border: transparent;

  --btn-height: var(--space-2xl); // 40px
  --btn-padding: 0 var(--space-md); // 16px
  --btn-font-size: var(--text-sm); // 14px
  --btn-gap: var(--space-xs); // 8px

  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--btn-gap);

  height: var(--btn-height);
  padding: var(--btn-padding);

  font-family: var(--font-sans), sans-serif;
  font-size: var(--btn-font-size);
  font-weight: p.$weight-medium;
  line-height: 1;
  white-space: nowrap;
  text-decoration: none;

  background-color: var(--btn-bg);
  color: var(--btn-color);
  border: 1px solid var(--btn-border);
  border-radius: var(--radius-md);

  cursor: pointer;
  user-select: none;
  transition: all var(--duration-normal) var(--ease-default);

  &:hover:not(:disabled):not([aria-disabled="true"]) {
    text-decoration: none;
  }

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--bg-surface), 0 0 0 4px var(--btn-theme-base);
    z-index: var(--z-10);
  }

  &:disabled,
  &[disabled],
  &[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  &.is-loading {
    color: transparent !important;
    pointer-events: none;
    position: relative;

    &::after {
      content: '';
      position: absolute;
      width: 1em;
      height: 1em;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
      border: 2px solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: spin 0.75s linear infinite;

      color: var(--btn-color);
    }
  }

  &__content {
    display: flex;
    align-items: center;
    gap: var(--space-xxs);
  }


  &--sm {
    --btn-height: var(--space-12); // 32px
    --btn-padding: 0 var(--space-sm); // 12px
    --btn-font-size: var(--text-xs); // 12px
  }

  &--md {
    --btn-height: var(--space-14); // 40px
    --btn-padding: 0 var(--space-md); // 16px
    --btn-font-size: var(--text-sm); // 14px
  }

  &--lg {
    --btn-height: var(--space-16); // 48px
    --btn-padding: 0 var(--space-lg); // 24px
    --btn-font-size: var(--text-base); // 16px
  }


  &--primary {
    --btn-theme-base: var(--accent-primary);
    --btn-theme-hover: var(--accent-hover);
  }

  &--success {
    --btn-theme-base: var(--color-success);
    --btn-theme-hover: var(--color-success-hover);
  }

  &--danger {
    --btn-theme-base: var(--color-danger);
    --btn-theme-hover: var(--color-danger-hover);
  }

  &--solid {
    --btn-bg: var(--btn-theme-base);
    --btn-color: var(--btn-theme-text-on-solid);
    --btn-border: transparent;

    &:hover:not(:disabled) {
      --btn-bg: var(--btn-theme-hover);
    }
  }

  &--outline {
    --btn-bg: transparent;
    --btn-color: var(--btn-theme-base);
    --btn-border: var(--btn-theme-base);

    &:hover:not(:disabled) {
      --btn-bg: var(--bg-hover);
    }
  }

  &--ghost {
    --btn-bg: transparent;
    --btn-color: var(--btn-theme-base);
    --btn-border: transparent;

    &:hover:not(:disabled) {
      --btn-bg: var(--bg-hover);
    }
  }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}